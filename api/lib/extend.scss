@import "./shared";

/// @alias restyle-extend
@function -restyle--extend($name, $definition: null) {
  $debug-message: "took {time} to extend definition for `#{name}`";

  $start-time: timer-start();

  @if (not map-get($-restyle--registered-components, $name)) {
    @warn "Attempting to extend `#{$name}` but it does not exist. You should use `restyle-define()` instead.";
    @return -restyle--define($name, $definition);
  }

  // get the current definition
  $current-definition: map-get($-restyle--registered-components, $name);

  // extend it
  $extended-definition: -restyle--map-merge-deep($current-definition, $definition);

  // and merge it back in
  $-restyle--registered-components: map-merge($-restyle--registered-components, (
    #{$name}: $extended-definition
  )) !global;

  $tmp: -restyle--log($debug-message, "time:extend", (
    time: elapsed-time($start-time)
  ));

  @return true;
}

/// @alias restyle-extend
@mixin -restyle--extend($name, $definition: null) {
  $tmp: -restyle--extend($name, $definition);
}
