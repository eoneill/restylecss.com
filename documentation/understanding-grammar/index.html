<!DOCTYPE html><html class=no-js><head><meta charset="utf-8"><meta name=viewport content="width=device-width,initial-scale=1"><title>Understanding Grammar | reSTYLE - UI Patterns. For Sass.</title><link href=//www.restylecss.com/styles/default.css rel="stylesheet"><link rel=canonical href="//www.restylecss.com/documentation/understanding-grammar"><meta property=og:url content="//www.restylecss.com/documentation/understanding-grammar"><meta property=og:site_name content="reSTYLE"><meta property=og:title content="Understanding Grammar | reSTYLE"><meta property=og:type content="Understanding Grammar | reSTYLE"><meta property=og:description content="As discussed previously, reSTYLE UI patterns are built around a concept of natural language. This natural language is converted into the grammar that describes…"><meta name=description content="As discussed previously, reSTYLE UI patterns are built around a concept of natural language. This natural language is converted into the grammar that describes…"><link rel=apple-touch-icon sizes=57x57 href="//www.restylecss.com/apple-icon-57x57.png"><link rel=apple-touch-icon sizes=60x60 href="//www.restylecss.com/apple-icon-60x60.png"><link rel=apple-touch-icon sizes=72x72 href="//www.restylecss.com/apple-icon-72x72.png"><link rel=apple-touch-icon sizes=76x76 href="//www.restylecss.com/apple-icon-76x76.png"><link rel=apple-touch-icon sizes=114x114 href="//www.restylecss.com/apple-icon-114x114.png"><link rel=apple-touch-icon sizes=120x120 href="//www.restylecss.com/apple-icon-120x120.png"><link rel=apple-touch-icon sizes=144x144 href="//www.restylecss.com/apple-icon-144x144.png"><link rel=apple-touch-icon sizes=152x152 href="//www.restylecss.com/apple-icon-152x152.png"><link rel=apple-touch-icon sizes=180x180 href="//www.restylecss.com/apple-icon-180x180.png"><link rel=icon type=image/png sizes=192x192 href="//www.restylecss.com/android-icon-192x192.png"><link rel=icon type=image/png sizes=16x16 href="//www.restylecss.com/favicon-16x16.png"><link rel=icon type=image/png sizes=32x32 href="//www.restylecss.com/favicon-32x32.png"><link rel=icon type=image/png sizes=96x96 href="//www.restylecss.com/favicon-96x96.png"><link rel=manifest href="//www.restylecss.com/manifest.json"><meta name=msapplication-TileImage content="//www.restylecss.com/ms-icon-144x144.png"><meta name=theme-color content="#3f3f3f"><meta name=msapplication-TileColor content="#3f3f3f"></head><body id=pageid_documentation_understanding-grammar><header id=global-header><a class=brand href="//www.restylecss.com/">reSTYLE</a><h1>Understanding Grammar</h1><nav id=global-nav><ul><li><a href=//www.restylecss.com/documentation title="Read the docs!">Docs</a></li><li><a href=//www.restylecss.com/api target=_blank title="API documentation">API</a></li><li><a href=//www.restylecss.com/github target=_blank title="View the source on GitHub">GitHub</a></li></ul></nav></header><div id=global-container><aside id=global-sidebar><button id=menu-toggle>...</button><div id=global-sidebar-content><h2>Getting Started</h2><a href=//www.restylecss.com/documentation/getting-started>Getting Started</a> <a href=//www.restylecss.com/documentation/configuration>Configuration</a> <a href=//www.restylecss.com/documentation/what-are-ui-patterns>What are UI Patterns?</a> <a href=//www.restylecss.com/documentation/understanding-grammar class=active>Understanding Grammar</a><h2>Defining Patterns</h2><a href=//www.restylecss.com/documentation/defining-ui-patterns>Defining UI Patterns</a> <a href=//www.restylecss.com/documentation/nesting-selectors>Nesting Selectors</a> <a href=//www.restylecss.com/documentation/modifiers>Modifiers</a> <a href=//www.restylecss.com/documentation/states>States</a> <a href=//www.restylecss.com/documentation/property-references>Property References</a> <a href=//www.restylecss.com/documentation/restyle-variables>Variables</a> <a href=//www.restylecss.com/documentation/namespaced-keys>Namespaced Keys</a> <a href=//www.restylecss.com/documentation/working-with-multiple-values>Multiple Values</a> <a href=//www.restylecss.com/documentation/custom-functions>Custom Functions</a><h2>Integration</h2><a href=//www.restylecss.com/documentation/noconflict>No Conflict Mode</a> <a href=//www.restylecss.com/documentation/smart-content>Smart Content</a> <a href=//www.restylecss.com/documentation/debugging>Debugging</a></div></aside><main id=global-main><div id=global-content><h2 id=grammar>Grammar</h2><p>As <a href=//www.restylecss.com/documentation/what-are-ui-patterns>discussed previously</a>, reSTYLE UI patterns are built around a concept of natural language. This natural language is converted into the <em>grammar</em> that describes the UI pattern.</p><p>For example, you might have a <code>button</code> definition, as well as a variant like a <code>small primary button</code>.</p><p>This is the basis for our grammar.</p><h2 id=parsing-grammar>Parsing Grammar</h2><p>reSTYLE has a built-in grammar engine that parses the natural language sentence in a grammar representation.</p><p>The first phase of grammar parsing is to understand <em>what</em> we’re talking about. This is known as the <code>type</code>.</p><p>In our example of a <code>small primary button</code>, we can determine that the thing we’re talking about is the <code>button</code>. So we say the <code>type</code> is <code>button</code>.</p><p>The rest of the sentence is known as the <code>description</code>. So in this case, our <code>description</code> is <code>small primary</code>.</p><p>The internal representation of this is:</p><pre><code class=lang-js><span class=hljs-rules>{
  <span class=hljs-rule><span class=hljs-attribute>type</span>:<span class=hljs-value> <span class=hljs-string>"button"</span>,
  description: [<span class=hljs-string>"small"</span>, <span class=hljs-string>"primary"</span>]
</span></span></span>}
</code></pre><h3 id=type>Type</h3><p>The type is determined as the first word that matches a UI definition identifier. So in this case, <code>restyle-define(button, ...)</code> let’s us know that <code>button</code> is a thing that we can talk about. The grammar engine doesn’t recognize <code>small</code> or <code>primary</code> as a valid type, but it recognizes <code>button</code>, so we’ve determined our type to be a <code>button</code>.</p><h3 id=description>Description</h3><p>The rest of the sentence is put into the description. The description then goes through a second phase of parsing.</p><h4 id=ignored-words>Ignored words</h4><p>The first thing we do on the description is to remove words that don’t have any real meaning. This list of words includes: <code>a</code>, <code>also</code>, <code>an</code>, <code>and</code>, <code>is</code>, <code>it</code>, <code>or</code>, <code>that</code>, <code>the</code>, <code>this</code>, <code>was</code></p><p>These words are discarded from the description.</p><h4 id=contextual-words>Contextual words</h4><p>The next step is to parse all of the contextual cues within the sentence. Contextual cues include <code>in</code> and <code>within</code>. For example, <code>button in a dialog</code>.</p><p>When a contextual cue is encountered, we rewrite the description to make sense.</p><p>For example, if we had a <code>button in a large dialog</code>, we have to identify that <code>large</code> applies to the <code>dialog</code> rather than to the <code>button</code>. This is a context shift.</p><h6 id=-in-vs-within-><code>in</code> vs <code>within</code></h6><p>When the <code>in</code> contextual cue is used, it signifies that the element must be a direct descendent of the context. That is, <code>button in a dialog</code>, the <code>button</code> must be a direct descendant of <code>dialog</code>.</p><p>However, the <code>within</code> cue applies an any descendent. That is, <code>button within a dialog</code> will be valid if any of the ancestors of <code>button</code> are a <code>dialog</code>.</p><h4 id=placement-words>Placement words</h4><p>Finally, we handle a few words that change the <em>placement</em> or attribution. These words include: <code>on</code>, <code>with</code>, <code>without</code>.</p><p>For example <code>button with a shadow</code>.</p><h3 id=adding-custom-grammar-engines>Adding custom grammar engines</h3><p>While the built-in grammar parser is quite robust, you may have a specific need to extend it. Here’s a quick example of doing just that (in your build pipeline):</p><pre><code class=lang-js>var Eyeglass =<span class=hljs-function> require(</span><span class=hljs-string>"eyeglass"</span><span class=hljs-function>)</span>.Eyeglass;

var eyeglass =<span class=hljs-instruction> new </span>Eyeglass({
  restyle: {
    // grammarEngines takes an<span class=hljs-instruction> array </span>of functions
    grammarEngines:<span class=hljs-function> [function(</span><span class=hljs-function>)</span> {
<span class=hljs-keyword>      .</span>..
    }]
  }
}<span class=hljs-function>)</span>;
</code></pre><p>The custom grammar engine function will have access to <code>this.description</code> and <code>this.type</code>. <code>this.description</code> may either be <code>null</code> or an array of strings while <code>this.type</code> is a string. Any changes you make here should be applied back onto the properties.</p><p>Here’s an example of a custom grammar engine:</p><pre><code class=lang-js><span class=hljs-function><span class=hljs-keyword>function</span><span class=hljs-params>()</span> </span>{
  <span class=hljs-keyword>this</span>.type = <span class=hljs-string>"my-prefix-"</span> + <span class=hljs-keyword>this</span>.type;
  <span class=hljs-keyword>if</span> (<span class=hljs-keyword>this</span>.description) {
    <span class=hljs-keyword>this</span>.description = <span class=hljs-keyword>this</span>.description.filter(...);
  }
}
</code></pre><h4 id=from-an-eyeglass-module>From an eyeglass module</h4><p>If you’ve authored a reSTYLE eyeglass module but don’t have access to the build environment, you can still add grammar engines via the plugin interface. In your <code>eyeglass-exports.js</code> file, you’d do something like…</p><pre><code class=lang-js><span class=hljs-function><span class=hljs-keyword>module</span>.<span class=hljs-title>exports</span> =</span> <span class=hljs-function><span class=hljs-keyword>function</span><span class=hljs-params>(eyeglass, sass)</span> {</span>
  eyeglass.options.restyle.addGrammarEngine(<span class=hljs-function><span class=hljs-keyword>function</span><span class=hljs-params>()</span> {</span> ... });
};
</code></pre><ul class=page-tags><li class=tag><a href=//www.restylecss.com/topics/getting-started>getting started</a></li><li class=tag><a href=//www.restylecss.com/topics/grammar>grammar</a></li></ul></div></main></div><footer id=global-footer><div><p class=copyright><a href=http://engineering.linkedin.com target=_blank><span class=holder>LinkedIn Corporation</span> &copy; <span class=year>2016</span></a></p><p class=badges><a href=https://github.com/eoneill/eyeglass-restyle/fork target=_blank><img src=//img.shields.io/github/forks/eoneill/eyeglass-restyle.svg?style&#x3D;flat-square class=badge alt="Forks on GitHub"></a> <a href="https://github.com/eoneill/eyeglass-restyle/" target=_blank><img src=//img.shields.io/github/stars/eoneill/eyeglass-restyle.svg?style&#x3D;flat-square class=badge alt="Stars on GitHub"></a> <a href=https://github.com/eoneill/eyeglass-restyle/issues target=_blank><img src=//img.shields.io/github/issues-raw/eoneill/eyeglass-restyle.svg?style&#x3D;flat-square class=badge alt="Issues on GitHub"></a> <a href=https://travis-ci.org/eoneill/eyeglass-restyle target=_blank><img src=//img.shields.io/travis/eoneill/eyeglass-restyle.svg?style&#x3D;flat-square class=badge alt="Build Status"></a> <a href=https://www.npmjs.com/package/eyeglass-restyle target=_blank><img src=//img.shields.io/npm/v/eyeglass-restyle.svg?style&#x3D;flat-square class=badge alt="Version"></a> <a href=https://github.com/eoneill/eyeglass-restyle/blob/master/LICENSE target=_blank><img src=//img.shields.io/npm/l/eyeglass-restyle.svg?style&#x3D;flat-square class=badge alt="License"></a></p></div></footer><script src=//www.restylecss.com/scripts/default.js></script></body></html>